---
layout:     post
title:      TDD å…¥é—¨
subtitle:   TDD å…¥é—¨
date:       2019-12-24
author:     BY
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - TDD
    - æµ‹è¯•
---
# å‰è¨€
&emsp;&emsp;å‘¨æœ«å‚åŠ äº† ThoughtWorks çš„çº¿ä¸‹ TDD æŠ€æœ¯äº¤æµ, æ”¶è·è¿˜æ˜¯æŒºå¤šçš„, æ„Ÿè§‰è‡ªå·±ä¹‹å‰ä¸€ç›´åœ¨é—­é—¨é€ è½¦, è¿˜å¥½æ˜¯æ²¡èµ°å¤ªæ­ª. ğŸ˜…

---
# WHAT
&emsp;&emsp;TDD å³ Test Driven Design æµ‹è¯•é©±åŠ¨è®¾è®¡ / Test Driven Development æµ‹è¯•é©±åŠ¨å¼€å‘. TDD æ˜¯æé™ç¼–ç¨‹ä¸­æ ¸å¿ƒçš„ä¸€é¡¹å®è·µ. 
&emsp;&emsp;å…¶ä¸­æœ€éš¾ç†è§£çš„å°±æ˜¯è¿™ä¸ªé©±åŠ¨çš„æ¦‚å¿µ, è‡³å°‘æˆ‘ä¸ªäººè®¤ä¸ºæ˜¯æ¯”è¾ƒéš¾ç†è§£çš„, éœ€è¦å®è·µä¸€æ®µæ—¶é—´æ‰èƒ½ç†è§£.

---
# WHY
###### åœºæ™¯ä¸€
æ–°éœ€æ±‚ä¸‹æ¥äº†, æ˜å¤©ä¸Šçº¿
ä¸ºäº†"å¿«é€Ÿ"ä¸Šçº¿, ä¸å†™æµ‹è¯•
å†™å®Œäº†, æ‰‹å·¥æµ‹è¯•ä¸€ä¸‹, èµ¶ç´§ææµ‹ä¸Šçº¿
æµ‹è¯•äººå‘˜æ²¡æµ‹å‡º Bug, ä¸Šçº¿äº†
ç»“æœå‡º Bug äº†

###### åœºæ™¯äºŒ
åŠ æ–°åŠŸèƒ½äº†
çœ‹ç€ä»¥å‰çš„ä¸€å¨ä»£ç , æƒ³é‡æ„å´åˆä¸æ•¢
åªå¥½æ‰¾ä¸ªè§’è½åŠ ä¸ª if else
æµ‹è¯•æ²¡é—®é¢˜, ææµ‹ä¸Šçº¿
æ…¢æ…¢å°±ä¼šå˜æˆç¥–ä¼ ä»£ç 

##### ä»¥ä¸Šä¸¤ä¸ªåœºæ™¯çš„ä¸è¶³
###### æ‰‹å·¥æµ‹è¯•
è‡ªå·±è®¤ä¸ºç”¨ PostMan æµ‹äº†å‡ æ¬¡å·®ä¸å¤šæ²¡é—®é¢˜äº†, ä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªæŒ‡æ ‡å»è¡¡é‡æ˜¯å¦æµ‹è¯•å…¨é¢äº†. è¿™é‡Œå°±éœ€è¦ IDE å¸®åŠ©åˆ†æå‡ºæµ‹è¯•çš„è¯­å¥è¦†ç›–åº¦, åˆ†æ”¯è¦†ç›–åº¦, è¯­å¥åˆ†æ”¯éƒ½ 100% è¦†ç›–äº†, æ‰èƒ½ä¿è¯æµ‹è¯•å…¨é¢äº†, å‰ææ˜¯éœ€è¦æœ‰æµ‹è¯•ç”¨ä¾‹.
###### ä¸è¦è¿‡å¤šä¾èµ–æµ‹è¯•äººå‘˜
æµ‹è¯•äººå‘˜åªèƒ½è¿›è¡Œé»‘ç›’æµ‹è¯•, æµ‹è¯•èŒƒå›´æœ‰é™.
å¯èƒ½è‡ªå·±æ£€æŸ¥å‡ºè¿™ä¸ª Bug åªéœ€è¦å‡ åˆ†é’Ÿ, å¦‚æœç›´æ¥æäº¤ç»™æµ‹è¯•å›¢é˜Ÿçš„è¯, å¯èƒ½éœ€è¦åŠå¤©ç”šè‡³æ›´ä¹…, æµ‹è¯•å›¢é˜Ÿæ‰èƒ½æ£€æŸ¥å‡º Bug, å¯¼è‡´åé¦ˆå‘¨æœŸå˜é•¿, é—´æ¥å¯¼è‡´äº¤ä»˜å‘¨æœŸå˜é•¿.
###### è½¯ä»¶å˜æ›´çš„æˆæœ¬ä¼šéšæ—¶é—´ä¸å¼€å‘é˜¶æ®µå¢åŠ 
èƒ½åœ¨éœ€æ±‚é˜¶æ®µè§£å†³çš„é—®é¢˜å°±ä¸è¦æ‹–åˆ°å¼€å‘é˜¶æ®µ<br>
èƒ½åœ¨å¼€å‘é˜¶æ®µè§£å†³çš„é—®é¢˜å°±ä¸è¦æ‹–åˆ°æµ‹è¯•é˜¶æ®µ
###### é‡æ„ä¸æµ‹è¯•æ˜¯ç›¸è¾…ç›¸æˆçš„
æ²¡æœ‰æµ‹è¯•, åªèƒ½æå¿ƒåŠèƒ†çš„é‡æ„<br>
æ²¡æœ‰é‡æ„, ä»£ç ä¼šå˜å¾—è¶Šæ¥è¶Šæ··ä¹±

#### TDD èƒ½è§£å†³çš„ç—›ç‚¹
- è–›å®šè°”çš„ä»£ç 
- é‡æ„è´¨é‡æ— æ³•ä¿è¯
- åé¦ˆå‘¨æœŸé•¿

---
# HOW
åœ¨ç¼–å†™å®ç°ä¹‹å‰ç¼–å†™æµ‹è¯•ç”¨ä¾‹. <br>
###### ä¸€ä¸ªå®Œæ•´çš„ TDD æµç¨‹
1. éœ€æ±‚åˆ†è§£, æ‹†åˆ†ä¸ºå¤šä¸ª case
2. æ‰¾äº§å“/å®¢æˆ·ç¡®è®¤ case æ˜¯å¦æ­£ç¡®, æ˜¯å¦æœ‰é—æ¼
3. å†™æµ‹è¯•, åªå…³æ³¨è¾“å…¥è¾“å‡º, ä¸å…³æ³¨ä¸­é—´è¿‡ç¨‹
4. å†™å®ç°, ç”¨æœ€ç®€å•çš„å®ç°æ»¡è¶³å½“å‰çš„æµ‹è¯•
5. é‡æ„
6. ä¿¡å¿ƒæ»¡æ»¡çš„æäº¤ä»£ç 

---
# TDD Hello World
##### éœ€æ±‚
ç»™å‡ºä¸€ä¸ª 1 åˆ° 100 çš„æ•°å­—, å¦‚æœæ˜¯ 3 çš„å€æ•°å°±ä¼šå¾—åˆ° "Fizz", å¦‚æœæ˜¯ 5 çš„å€æ•°å°±ä¼šå¾—åˆ° "Buzz", å¦‚æœå³æ˜¯ 3 çš„å€æ•°ä¹Ÿæ˜¯ 5 çš„å€æ•°å°±å¾—åˆ° "FizzBuzz", å¦‚æœéƒ½ä¸æ˜¯å°±ä¼šå¾—åˆ°åŸæ•°å­—.
##### éœ€æ±‚æ‹†è§£
- ç»™å‡º 1 å¾—åˆ° 1
- ç»™å‡º 2 å¾—åˆ° 2
- ç»™å‡º 3 å¾—åˆ° Fizz
- ç»™å‡º 5 å¾—åˆ° Buzz
- ç»™å‡º 15 å¾—åˆ° FizzBuzz
##### æ‰¾äº§å“/å®¢æˆ·ç¡®è®¤
æ²¡é€šè¿‡åˆ™ä¿®æ”¹, ç›´åˆ°é€šè¿‡äº§å“ç¡®è®¤åå†è¿›è¡Œä¸‹ä¸€æ­¥
##### ç¼–å†™ç©ºçš„å®ç°
åªè¦ä¿è¯å®ƒèƒ½å¤Ÿè¢«æ‰§è¡Œ, ä¸æŠ¥ç¼–è¯‘é”™è¯¯å³å¯
``` java
    public String handle(int input) {
        return "";
    }
```
##### ç¼–å†™ç¬¬ä¸€ä¸ª case çš„æµ‹è¯•ç”¨ä¾‹
``` java
    @Test
    public void input1() {
        // GIVEN
        int input = 1;
        // WHEN
        String result = handle(input);
        // THEN
        assertThat(result).isEquals("1");
    }
```
##### ç¼–å†™æ°å¥½èƒ½å¤Ÿé€šè¿‡æ­¤æµ‹è¯•ç”¨ä¾‹çš„å®ç°
``` java
    public String handle(int input) {
        return "1";
    }
```
##### ç¼–å†™ç¬¬äºŒä¸ª case çš„æµ‹è¯•ç”¨ä¾‹
``` java
    @Test
    public void input2() {
        // GIVEN
        int input = 2;
        // WHEN
        String result = handle(input);
        // THEN
        assertThat(result).isEquals("2");
    }
```
##### ç¼–å†™æ°å¥½èƒ½å¤Ÿé€šè¿‡å‰ä¸¤ä¸ªæ­¤æµ‹è¯•ç”¨ä¾‹çš„å®ç°
``` java
    public String handle(int input) {
        if (input == 1) {
            return "1";
        } else {
            return "2";
        }
    }
```
æˆ‘è®¤ä¸ºè¿™æ—¶å€™éœ€è¦é‡æ„äº†, é‡æ„åçš„ä»£ç 
``` java
    public String handle(int input) {
        return String.valueOf(input);
    }
```
è·‘äº†ä¸€ä¸‹æµ‹è¯•ç±», æ²¡é—®é¢˜èƒ½è·‘é€š, è¿™æ¬¡é‡æ„æ˜¯æˆåŠŸçš„


##### ç¼–å†™ç¬¬ä¸‰ä¸ª case çš„æµ‹è¯•ç”¨ä¾‹
``` java
    @Test
    public void input3() {
        // GIVEN
        int input = 3;
        // WHEN
        String result = handle(input);
        // THEN
        assertThat(result).isEquals("Fizz");
    }
```
##### ç¼–å†™æ°å¥½èƒ½å¤Ÿé€šè¿‡å‰ä¸‰ä¸ªæµ‹è¯•ç”¨ä¾‹çš„å®ç°
``` java
    public String handle(int input) {
        if (input == 3) {
            return "Fizz";
        }
        return String.valueOf(input);
    }
```
##### ç¼–å†™ç¬¬å››ä¸ª case çš„æµ‹è¯•ç”¨ä¾‹
``` java
    @Test
    public void input5() {
        // GIVEN
        int input = 5;
        // WHEN
        String result = handle(input);
        // THEN
        assertThat(result).isEquals("Buzz");
    }
```

##### ç¼–å†™æ°å¥½èƒ½å¤Ÿé€šè¿‡å‰å››ä¸ªæµ‹è¯•ç”¨ä¾‹çš„å®ç°
``` java
    public String handle(int input) {
        if (input == 3) {
            return "Fizz";
        } else if (input == 5) {
            return "Buzz";
        }
        return String.valueOf(input);
    }
```
##### ç¼–å†™ç¬¬äº”ä¸ª case çš„æµ‹è¯•ç”¨ä¾‹
``` java
    @Test
    public void input15() {
        // GIVEN
        int input = 15;
        // WHEN
        String result = handle(input);
        // THEN
        assertThat(result).isEquals("Buzz");
    }
```

##### ç¼–å†™æ°å¥½èƒ½å¤Ÿé€šè¿‡å‰äº”ä¸ªæµ‹è¯•ç”¨ä¾‹çš„å®ç°
``` java
    public String handle(int input) {
        if (input == 3) {
            return "Fizz";
        } else if (input == 5) {
            return "Buzz";
        } else if (input == 15) {
            return "FizzBuzz";
        }
        return String.valueOf(input);
    }
```
è¿™æ—¶å€™æˆ‘è§‰å¾—åˆè¯¥é‡æ„äº†.<br> é‡æ„åçš„ä»£ç 
``` java
    public String handle(int input) {
        if (input % 3 == 0 && input % 5 == 0) {
            return "FizzBuzz";
        } else if (input % 3 == 0) {
            return "Fizz";
        } else if (input % 5 == 0) {
            return "Buzz";
        }
        return String.valueOf(input);
    }
```
æš‚ä¸”ä¸è¯„è®ºä»£ç æœ¬èº«å†™çš„æ€ä¹ˆæ ·ğŸ˜…
æ—¨åœ¨é€šè¿‡è¿™ä¸ªä¾‹å­èƒ½å¤Ÿæ¯”è¾ƒå¥½çš„ç†è§£é©±åŠ¨çš„æ„ä¹‰. ç”±æµ‹è¯•ç±»å»é©±åŠ¨æˆ‘ä»¬å®Œæˆä»£ç çš„ç¼–å†™.
